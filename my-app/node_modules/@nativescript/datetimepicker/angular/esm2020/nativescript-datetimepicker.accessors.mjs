import { Directive, forwardRef } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { BaseValueAccessor } from "@nativescript/angular";
import * as i0 from "@angular/core";
const DATE_PICKER_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => DatePickerValueAccessor),
    multi: true,
};
const TIME_PICKER_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => TimePickerValueAccessor),
    multi: true,
};
const DATE_TIME_PICKERS_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => DateTimePickersValueAccessor),
    multi: true,
};
/**
 * The accessor for setting a date and listening to changes that is used by the
 * {@link NgModel} directives.
 *
 *  ### Example
 *  ```
 *  <DatePickerField [(ngModel)]="model.test">
 *  ```
 */
export class DatePickerValueAccessor extends BaseValueAccessor {
    constructor(elementRef) {
        super(elementRef.nativeElement);
        this._hasBeenOpened = false;
    }
    writeValue(value) {
        const normalized = super.normalizeValue(value);
        this.view.date = normalized;
    }
    handleDateChange(args) {
        if (this._hasBeenOpened) {
            this.onChange(args.value);
        }
    }
    handleDatePickerOpened(args) {
        this._hasBeenOpened = true;
    }
    handleDatePickerClosed(args) {
        this.onTouched();
    }
}
DatePickerValueAccessor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: DatePickerValueAccessor, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
DatePickerValueAccessor.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "15.2.4", type: DatePickerValueAccessor, selector: "DatePickerField[ngModel],DatePickerField[formControlName],DatePickerField[formControl],datepickerfield[ngModel],datepickerfield[formControlName],datepickerfield[formControl],datePickerField[ngModel],datePickerField[formControlName],datePickerField[formControl],date-picker-field[ngModel],date-picker-field[formControlName],date-picker-field[formControl]", host: { listeners: { "dateChange": "handleDateChange($event)", "datePickerOpened": "handleDatePickerOpened($event)", "datePickerClosed": "handleDatePickerClosed($event)" } }, providers: [DATE_PICKER_VALUE_ACCESSOR], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: DatePickerValueAccessor, decorators: [{
            type: Directive,
            args: [{
                    selector: "DatePickerField[ngModel],DatePickerField[formControlName],DatePickerField[formControl]," +
                        "datepickerfield[ngModel],datepickerfield[formControlName],datepickerfield[formControl]," +
                        "datePickerField[ngModel],datePickerField[formControlName],datePickerField[formControl]," +
                        "date-picker-field[ngModel],date-picker-field[formControlName],date-picker-field[formControl]",
                    providers: [DATE_PICKER_VALUE_ACCESSOR],
                    host: {
                        "(dateChange)": "handleDateChange($event)",
                        "(datePickerOpened)": "handleDatePickerOpened($event)",
                        "(datePickerClosed)": "handleDatePickerClosed($event)"
                    },
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; } });
/**
 * The accessor for setting a time and listening to changes that is used by the
 * {@link NgModel} directives.
 *
 *  ### Example
 *  ```
 *  <TimePickerField [(ngModel)]="model.test">
 *  ```
 */
export class TimePickerValueAccessor extends BaseValueAccessor {
    constructor(elementRef) {
        super(elementRef.nativeElement);
        this._hasBeenOpened = false;
    }
    writeValue(value) {
        const normalized = super.normalizeValue(value);
        this.view.time = normalized;
    }
    handleTimeChange(args) {
        if (this._hasBeenOpened) {
            this.onChange(args.value);
        }
    }
    handleTimePickerOpened(args) {
        this._hasBeenOpened = true;
    }
    handleTimePickerClosed(args) {
        this.onTouched();
    }
}
TimePickerValueAccessor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: TimePickerValueAccessor, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
TimePickerValueAccessor.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "15.2.4", type: TimePickerValueAccessor, selector: "TimePickerField[ngModel],TimePickerField[formControlName],TimePickerField[formControl],timepickerfield[ngModel],timepickerfield[formControlName],timepickerfield[formControl],timePickerField[ngModel],timePickerField[formControlName],timePickerField[formControl],time-picker-field[ngModel],time-picker-field[formControlName],time-picker-field[formControl]", host: { listeners: { "timeChange": "handleTimeChange($event)", "timePickerOpened": "handleTimePickerOpened($event)", "timePickerClosed": "handleTimePickerClosed($event)" } }, providers: [TIME_PICKER_VALUE_ACCESSOR], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: TimePickerValueAccessor, decorators: [{
            type: Directive,
            args: [{
                    selector: "TimePickerField[ngModel],TimePickerField[formControlName],TimePickerField[formControl]," +
                        "timepickerfield[ngModel],timepickerfield[formControlName],timepickerfield[formControl]," +
                        "timePickerField[ngModel],timePickerField[formControlName],timePickerField[formControl]," +
                        "time-picker-field[ngModel],time-picker-field[formControlName],time-picker-field[formControl]",
                    providers: [TIME_PICKER_VALUE_ACCESSOR],
                    host: {
                        "(timeChange)": "handleTimeChange($event)",
                        "(timePickerOpened)": "handleTimePickerOpened($event)",
                        "(timePickerClosed)": "handleTimePickerClosed($event)"
                    },
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; } });
/**
 * The accessor for setting a date and listening to changes that is used by the
 * {@link NgModel} directives.
 *
 *  ### Example
 *  ```
 *  <DateTimePickerFields [(ngModel)]="model.test">
 *  ```
 */
export class DateTimePickersValueAccessor extends BaseValueAccessor {
    constructor(elementRef) {
        super(elementRef.nativeElement);
        this._hasBeenOpened = false;
    }
    writeValue(value) {
        const normalized = super.normalizeValue(value);
        this.view.date = normalized;
    }
    handleDateChange(args) {
        if (this._hasBeenOpened) {
            this.onChange(args.value);
        }
    }
    handlePickerOpened(args) {
        this._hasBeenOpened = true;
    }
    handlePickerClosed(args) {
        this.onTouched();
    }
}
DateTimePickersValueAccessor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: DateTimePickersValueAccessor, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });
DateTimePickersValueAccessor.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "15.2.4", type: DateTimePickersValueAccessor, selector: "DateTimePickerFields[ngModel],DateTimePickerFields[formControlName],DateTimePickerFields[formControl],datetimepickerfields[ngModel],datetimepickerfields[formControlName],datetimepickerfields[formControl],dateTimePickerFields[ngModel],dateTimePickerFields[formControlName],dateTimePickerFields[formControl],date-time-picker-fields[ngModel],date-time-picker-fields[formControlName],date-time-picker-fields[formControl]", host: { listeners: { "dateChange": "handleDateChange($event)", "datePickerOpened": "handlePickerOpened($event)", "datePickerClosed": "handlePickerClosed($event)", "timePickerOpened": "handlePickerOpened($event)", "timePickerClosed": "handlePickerClosed($event)" } }, providers: [DATE_TIME_PICKERS_VALUE_ACCESSOR], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.4", ngImport: i0, type: DateTimePickersValueAccessor, decorators: [{
            type: Directive,
            args: [{
                    selector: "DateTimePickerFields[ngModel],DateTimePickerFields[formControlName],DateTimePickerFields[formControl]," +
                        "datetimepickerfields[ngModel],datetimepickerfields[formControlName],datetimepickerfields[formControl]," +
                        "dateTimePickerFields[ngModel],dateTimePickerFields[formControlName],dateTimePickerFields[formControl]," +
                        "date-time-picker-fields[ngModel],date-time-picker-fields[formControlName],date-time-picker-fields[formControl]",
                    providers: [DATE_TIME_PICKERS_VALUE_ACCESSOR],
                    host: {
                        "(dateChange)": "handleDateChange($event)",
                        "(datePickerOpened)": "handlePickerOpened($event)",
                        "(datePickerClosed)": "handlePickerClosed($event)",
                        "(timePickerOpened)": "handlePickerOpened($event)",
                        "(timePickerClosed)": "handlePickerClosed($event)"
                    },
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZlc2NyaXB0LWRhdGV0aW1lcGlja2VyLmFjY2Vzc29ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2RhdGV0aW1lcGlja2VyL2FuZ3VsYXIvbmF0aXZlc2NyaXB0LWRhdGV0aW1lcGlja2VyLmFjY2Vzc29ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFjLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7QUFHMUQsTUFBTSwwQkFBMEIsR0FBRztJQUMvQixPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsdUJBQXVCLENBQUM7SUFDdEQsS0FBSyxFQUFFLElBQUk7Q0FDZCxDQUFDO0FBRUYsTUFBTSwwQkFBMEIsR0FBRztJQUMvQixPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsdUJBQXVCLENBQUM7SUFDdEQsS0FBSyxFQUFFLElBQUk7Q0FDZCxDQUFDO0FBRUYsTUFBTSxnQ0FBZ0MsR0FBRztJQUNyQyxPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsNEJBQTRCLENBQUM7SUFDM0QsS0FBSyxFQUFFLElBQUk7Q0FDZCxDQUFDO0FBRUY7Ozs7Ozs7O0dBUUc7QUFhSCxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsaUJBQWtDO0lBRTNFLFlBQVksVUFBc0I7UUFDOUIsS0FBSyxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUY1QixtQkFBYyxHQUFHLEtBQUssQ0FBQztJQUcvQixDQUFDO0lBRUQsVUFBVSxDQUFDLEtBQVU7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LENBQUMsY0FBYyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzdCO0lBQ0wsQ0FBQztJQUVELGtCQUFrQixDQUFDLElBQVM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQztJQUVELGtCQUFrQixDQUFDLElBQVM7UUFDeEIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3JCLENBQUM7O3lIQXZCUSw0QkFBNEI7NkdBQTVCLDRCQUE0Qixzc0JBVDFCLENBQUMsZ0NBQWdDLENBQUM7MkZBU3BDLDRCQUE0QjtrQkFkeEMsU0FBUzttQkFBQztvQkFDUCxRQUFRLEVBQUUsd0dBQXdHO3dCQUM5Ryx3R0FBd0c7d0JBQ3hHLHdHQUF3Rzt3QkFDeEcsZ0hBQWdIO29CQUNwSCxTQUFTLEVBQUUsQ0FBQyxnQ0FBZ0MsQ0FBQztvQkFDN0MsSUFBSSxFQUFFO3dCQUNGLGNBQWMsRUFBRSwwQkFBMEI7d0JBQzFDLG9CQUFvQixFQUFFLDRCQUE0Qjt3QkFDbEQsb0JBQW9CLEVBQUUsNEJBQTRCO3dCQUNsRCxvQkFBb0IsRUFBRSw0QkFBNEI7d0JBQ2xELG9CQUFvQixFQUFFLDRCQUE0QjtxQkFDckQ7aUJBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIGZvcndhcmRSZWYgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcbmltcG9ydCB7IEJhc2VWYWx1ZUFjY2Vzc29yIH0gZnJvbSBcIkBuYXRpdmVzY3JpcHQvYW5ndWxhclwiO1xuaW1wb3J0IHsgRGF0ZVBpY2tlckZpZWxkLCBUaW1lUGlja2VyRmllbGQsIERhdGVUaW1lUGlja2VyRmllbGRzIH0gZnJvbSBcIkBuYXRpdmVzY3JpcHQvZGF0ZXRpbWVwaWNrZXJcIjtcblxuY29uc3QgREFURV9QSUNLRVJfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRGF0ZVBpY2tlclZhbHVlQWNjZXNzb3IpLFxuICAgIG11bHRpOiB0cnVlLFxufTtcblxuY29uc3QgVElNRV9QSUNLRVJfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gVGltZVBpY2tlclZhbHVlQWNjZXNzb3IpLFxuICAgIG11bHRpOiB0cnVlLFxufTtcblxuY29uc3QgREFURV9USU1FX1BJQ0tFUlNfVkFMVUVfQUNDRVNTT1IgPSB7XG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRGF0ZVRpbWVQaWNrZXJzVmFsdWVBY2Nlc3NvciksXG4gICAgbXVsdGk6IHRydWUsXG59O1xuXG4vKipcbiAqIFRoZSBhY2Nlc3NvciBmb3Igc2V0dGluZyBhIGRhdGUgYW5kIGxpc3RlbmluZyB0byBjaGFuZ2VzIHRoYXQgaXMgdXNlZCBieSB0aGVcbiAqIHtAbGluayBOZ01vZGVsfSBkaXJlY3RpdmVzLlxuICpcbiAqICAjIyMgRXhhbXBsZVxuICogIGBgYFxuICogIDxEYXRlUGlja2VyRmllbGQgWyhuZ01vZGVsKV09XCJtb2RlbC50ZXN0XCI+XG4gKiAgYGBgXG4gKi9cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiBcIkRhdGVQaWNrZXJGaWVsZFtuZ01vZGVsXSxEYXRlUGlja2VyRmllbGRbZm9ybUNvbnRyb2xOYW1lXSxEYXRlUGlja2VyRmllbGRbZm9ybUNvbnRyb2xdLFwiICtcbiAgICAgICAgXCJkYXRlcGlja2VyZmllbGRbbmdNb2RlbF0sZGF0ZXBpY2tlcmZpZWxkW2Zvcm1Db250cm9sTmFtZV0sZGF0ZXBpY2tlcmZpZWxkW2Zvcm1Db250cm9sXSxcIiArXG4gICAgICAgIFwiZGF0ZVBpY2tlckZpZWxkW25nTW9kZWxdLGRhdGVQaWNrZXJGaWVsZFtmb3JtQ29udHJvbE5hbWVdLGRhdGVQaWNrZXJGaWVsZFtmb3JtQ29udHJvbF0sXCIgK1xuICAgICAgICBcImRhdGUtcGlja2VyLWZpZWxkW25nTW9kZWxdLGRhdGUtcGlja2VyLWZpZWxkW2Zvcm1Db250cm9sTmFtZV0sZGF0ZS1waWNrZXItZmllbGRbZm9ybUNvbnRyb2xdXCIsXG4gICAgcHJvdmlkZXJzOiBbREFURV9QSUNLRVJfVkFMVUVfQUNDRVNTT1JdLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgXCIoZGF0ZUNoYW5nZSlcIjogXCJoYW5kbGVEYXRlQ2hhbmdlKCRldmVudClcIixcbiAgICAgICAgXCIoZGF0ZVBpY2tlck9wZW5lZClcIjogXCJoYW5kbGVEYXRlUGlja2VyT3BlbmVkKCRldmVudClcIixcbiAgICAgICAgXCIoZGF0ZVBpY2tlckNsb3NlZClcIjogXCJoYW5kbGVEYXRlUGlja2VyQ2xvc2VkKCRldmVudClcIlxuICAgIH0sXG59KVxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJWYWx1ZUFjY2Vzc29yIGV4dGVuZHMgQmFzZVZhbHVlQWNjZXNzb3I8RGF0ZVBpY2tlckZpZWxkPiB7XG4gICAgcHJpdmF0ZSBfaGFzQmVlbk9wZW5lZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICB9XG5cbiAgICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHN1cGVyLm5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy52aWV3LmRhdGUgPSBub3JtYWxpemVkO1xuICAgIH1cblxuICAgIGhhbmRsZURhdGVDaGFuZ2UoYXJnczogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNCZWVuT3BlbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGFyZ3MudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlRGF0ZVBpY2tlck9wZW5lZChhcmdzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5faGFzQmVlbk9wZW5lZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaGFuZGxlRGF0ZVBpY2tlckNsb3NlZChhcmdzOiBhbnkpIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGFjY2Vzc29yIGZvciBzZXR0aW5nIGEgdGltZSBhbmQgbGlzdGVuaW5nIHRvIGNoYW5nZXMgdGhhdCBpcyB1c2VkIGJ5IHRoZVxuICoge0BsaW5rIE5nTW9kZWx9IGRpcmVjdGl2ZXMuXG4gKlxuICogICMjIyBFeGFtcGxlXG4gKiAgYGBgXG4gKiAgPFRpbWVQaWNrZXJGaWVsZCBbKG5nTW9kZWwpXT1cIm1vZGVsLnRlc3RcIj5cbiAqICBgYGBcbiAqL1xuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6IFwiVGltZVBpY2tlckZpZWxkW25nTW9kZWxdLFRpbWVQaWNrZXJGaWVsZFtmb3JtQ29udHJvbE5hbWVdLFRpbWVQaWNrZXJGaWVsZFtmb3JtQ29udHJvbF0sXCIgK1xuICAgICAgICBcInRpbWVwaWNrZXJmaWVsZFtuZ01vZGVsXSx0aW1lcGlja2VyZmllbGRbZm9ybUNvbnRyb2xOYW1lXSx0aW1lcGlja2VyZmllbGRbZm9ybUNvbnRyb2xdLFwiICtcbiAgICAgICAgXCJ0aW1lUGlja2VyRmllbGRbbmdNb2RlbF0sdGltZVBpY2tlckZpZWxkW2Zvcm1Db250cm9sTmFtZV0sdGltZVBpY2tlckZpZWxkW2Zvcm1Db250cm9sXSxcIiArXG4gICAgICAgIFwidGltZS1waWNrZXItZmllbGRbbmdNb2RlbF0sdGltZS1waWNrZXItZmllbGRbZm9ybUNvbnRyb2xOYW1lXSx0aW1lLXBpY2tlci1maWVsZFtmb3JtQ29udHJvbF1cIixcbiAgICBwcm92aWRlcnM6IFtUSU1FX1BJQ0tFUl9WQUxVRV9BQ0NFU1NPUl0sXG4gICAgaG9zdDoge1xuICAgICAgICBcIih0aW1lQ2hhbmdlKVwiOiBcImhhbmRsZVRpbWVDaGFuZ2UoJGV2ZW50KVwiLFxuICAgICAgICBcIih0aW1lUGlja2VyT3BlbmVkKVwiOiBcImhhbmRsZVRpbWVQaWNrZXJPcGVuZWQoJGV2ZW50KVwiLFxuICAgICAgICBcIih0aW1lUGlja2VyQ2xvc2VkKVwiOiBcImhhbmRsZVRpbWVQaWNrZXJDbG9zZWQoJGV2ZW50KVwiXG4gICAgfSxcbn0pXG5leHBvcnQgY2xhc3MgVGltZVBpY2tlclZhbHVlQWNjZXNzb3IgZXh0ZW5kcyBCYXNlVmFsdWVBY2Nlc3NvcjxUaW1lUGlja2VyRmllbGQ+IHtcbiAgICBwcml2YXRlIF9oYXNCZWVuT3BlbmVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudFJlZjogRWxlbWVudFJlZikge1xuICAgICAgICBzdXBlcihlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHdyaXRlVmFsdWUodmFsdWU6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gc3VwZXIubm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLnZpZXcudGltZSA9IG5vcm1hbGl6ZWQ7XG4gICAgfVxuXG4gICAgaGFuZGxlVGltZUNoYW5nZShhcmdzOiBhbnkpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0JlZW5PcGVuZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoYXJncy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVUaW1lUGlja2VyT3BlbmVkKGFyZ3M6IGFueSkge1xuICAgICAgICB0aGlzLl9oYXNCZWVuT3BlbmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVUaW1lUGlja2VyQ2xvc2VkKGFyZ3M6IGFueSkge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgYWNjZXNzb3IgZm9yIHNldHRpbmcgYSBkYXRlIGFuZCBsaXN0ZW5pbmcgdG8gY2hhbmdlcyB0aGF0IGlzIHVzZWQgYnkgdGhlXG4gKiB7QGxpbmsgTmdNb2RlbH0gZGlyZWN0aXZlcy5cbiAqXG4gKiAgIyMjIEV4YW1wbGVcbiAqICBgYGBcbiAqICA8RGF0ZVRpbWVQaWNrZXJGaWVsZHMgWyhuZ01vZGVsKV09XCJtb2RlbC50ZXN0XCI+XG4gKiAgYGBgXG4gKi9cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiBcIkRhdGVUaW1lUGlja2VyRmllbGRzW25nTW9kZWxdLERhdGVUaW1lUGlja2VyRmllbGRzW2Zvcm1Db250cm9sTmFtZV0sRGF0ZVRpbWVQaWNrZXJGaWVsZHNbZm9ybUNvbnRyb2xdLFwiICtcbiAgICAgICAgXCJkYXRldGltZXBpY2tlcmZpZWxkc1tuZ01vZGVsXSxkYXRldGltZXBpY2tlcmZpZWxkc1tmb3JtQ29udHJvbE5hbWVdLGRhdGV0aW1lcGlja2VyZmllbGRzW2Zvcm1Db250cm9sXSxcIiArXG4gICAgICAgIFwiZGF0ZVRpbWVQaWNrZXJGaWVsZHNbbmdNb2RlbF0sZGF0ZVRpbWVQaWNrZXJGaWVsZHNbZm9ybUNvbnRyb2xOYW1lXSxkYXRlVGltZVBpY2tlckZpZWxkc1tmb3JtQ29udHJvbF0sXCIgK1xuICAgICAgICBcImRhdGUtdGltZS1waWNrZXItZmllbGRzW25nTW9kZWxdLGRhdGUtdGltZS1waWNrZXItZmllbGRzW2Zvcm1Db250cm9sTmFtZV0sZGF0ZS10aW1lLXBpY2tlci1maWVsZHNbZm9ybUNvbnRyb2xdXCIsXG4gICAgcHJvdmlkZXJzOiBbREFURV9USU1FX1BJQ0tFUlNfVkFMVUVfQUNDRVNTT1JdLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgXCIoZGF0ZUNoYW5nZSlcIjogXCJoYW5kbGVEYXRlQ2hhbmdlKCRldmVudClcIixcbiAgICAgICAgXCIoZGF0ZVBpY2tlck9wZW5lZClcIjogXCJoYW5kbGVQaWNrZXJPcGVuZWQoJGV2ZW50KVwiLFxuICAgICAgICBcIihkYXRlUGlja2VyQ2xvc2VkKVwiOiBcImhhbmRsZVBpY2tlckNsb3NlZCgkZXZlbnQpXCIsXG4gICAgICAgIFwiKHRpbWVQaWNrZXJPcGVuZWQpXCI6IFwiaGFuZGxlUGlja2VyT3BlbmVkKCRldmVudClcIixcbiAgICAgICAgXCIodGltZVBpY2tlckNsb3NlZClcIjogXCJoYW5kbGVQaWNrZXJDbG9zZWQoJGV2ZW50KVwiXG4gICAgfSxcbn0pXG5leHBvcnQgY2xhc3MgRGF0ZVRpbWVQaWNrZXJzVmFsdWVBY2Nlc3NvciBleHRlbmRzIEJhc2VWYWx1ZUFjY2Vzc29yPERhdGVUaW1lUGlja2VyRmllbGRzPiB7XG4gICAgcHJpdmF0ZSBfaGFzQmVlbk9wZW5lZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICB9XG5cbiAgICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHN1cGVyLm5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgdGhpcy52aWV3LmRhdGUgPSBub3JtYWxpemVkO1xuICAgIH1cblxuICAgIGhhbmRsZURhdGVDaGFuZ2UoYXJnczogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNCZWVuT3BlbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGFyZ3MudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlUGlja2VyT3BlbmVkKGFyZ3M6IGFueSkge1xuICAgICAgICB0aGlzLl9oYXNCZWVuT3BlbmVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVQaWNrZXJDbG9zZWQoYXJnczogYW55KSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgfVxufSJdfQ==